<div class="card p-6">
  <!-- Header Row: Stock In + Buttons -->
  <div class="flex justify-between items-center mb-6">
    <span class="block text-surface-900 font-bold text-2xl">Debit/Credit Link</span>
        <div class="flex  gap-4">
        <button pButton type="button" label="Generate DN" class="p-button-secondary" (click)="generateCN()"></button> 
        <button pButton type="button" label="Link CN" class="p-button-secondary" (click)="settleCN()"></button>
        <button pButton type="button" label="Reset" class="p-button-secondary" (click)="reset()"></button>
    </div>
  </div>

  <form [formGroup]="reportForm" (ngSubmit)="print()" class="space-y-8">

    <!-- ðŸ· Product Info Section -->
      <!-- Two-column grid layout -->
      <div class="grid grid-cols-2 gap-x-8 gap-y-4 w-full">

        <!-- DEBIT NOTE -->
         
        <div class="flex flex-col">
          <label class="font-medium mb-1">Debit Note</label>
          <input
          pInputText
          placeholder="Debit Note"
          formControlName="p_debitNote" />
        </div>
         <!-- CREDIT NOTE -->
      <div class="flex flex-col">
        <label class="font-medium mb-1">Credit Note</label>
           <p-dropdown
            [options]="creditNoteOptions"
            optionLabel="label"
            optionValue="value"
            [filter]="true"
            filterPlaceholder="Select Credit Note"
            formControlName="p_creditNote"
            placeholder="Credit Note">
          </p-dropdown>
      </div>
</div>
    <!-- Product Table with Pagination -->
    <div>
      <p-table
        [value]="saleArray.controls"
        dataKey="ItemId"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20, 50]"
        [responsiveLayout]="'scroll'"
        class="p-datatable-gridlines mt-6"
      >
        <ng-template #header>
          <tr class="bg-yellow-400">
            <th><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
             <th>Item Code</th>
            <th>Item Name</th>
            <th>Current Stock</th>
            <th>UOM</th>
            <th>Qty</th>
            <th>MRP</th>
            <th>Total</th>
            <th>Warranty</th>
            <th>Location</th>
            <th class="text-center">Action</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-row let-i="rowIndex">
          <tr [formGroup]="row">
             <td>{{ row.get('itemsku')?.value }}</td>
            <td>{{ row.get('ItemName')?.value }}</td>
            <td>{{ row.get('curStock')?.value }}</td>
            <td>{{ row.get('UOMId')?.value }}</td>
            <td>{{row.get('Quantity')?.value}}</td>
            <td>{{ row.get('MRP')?.value }}</td>
            <td>{{ row.get('totalPayable')?.value }}</td>
            <td>{{ row.get('warPeriod')?.value }}</td>
            <td>{{ row.get('location')?.value }}</td>

            <!-- DELETE -->
            <td class="text-center">
              <i
                class="pi pi-trash text-red-500 cursor-pointer"
                (click)="removeItem(i)">
              </i>
            </td>

          </tr>
        </ng-template>

        <ng-template pTemplate="paginatorleft">
          <div class="text-gray-600 ms-2">Total Items: {{ products?.length || 0 }}</div>
        </ng-template>
      </p-table>
    </div>
    <div class="flex justify-end items-center gap-4 mt-6 border-t pt-4">
      <label class="font-medium">Grand Total</label>
      <input pInputText type="text" [value]="grandTotal" readonly placeholder="Total" class="w-40 text-right" />
    </div>
  
  </form>

  
